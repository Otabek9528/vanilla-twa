<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nearby Mosques</title>
  <link rel="stylesheet" href="../css/style.css" />
  <style>
    /* Page-specific overrides for mosques page */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: visible !important;
    }
    
    body {
      display: flex;
      flex-direction: column;
      background: var(--light-bg);
    }
    
    .app__header {
      flex-shrink: 0;
    }
    
    .mosques-container {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
      padding: 20px 16px 40px 16px;
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="app__header">
    <div class="header-content">
      <img src="../assets/emblem.jpg" alt="Bot Emblem" class="bot-logo" />
      <h1>Muslim Vegukin Bot</h1>
    </div>
  </header>

  <!-- MOSQUES LIST -->
  <div class="mosques-container">
    <h2 class="page-title">üïå Yaqin masjidlar</h2>
    <p class="page-subtitle">Sizga eng yaqin 5 ta masjid</p>

    <!-- Mosque Cards Container -->
    <div class="mosque-cards" id="mosqueCards">
      <!-- Cards will be dynamically inserted here -->
    </div>
  </div>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    // Initialize Telegram WebApp
    const tg = window.Telegram.WebApp;
    tg.ready();
    
    try {
      tg.expand();
    } catch (e) {
      console.log('Expand not supported');
    }
    
    // Show back button
    try {
      if (tg.BackButton) {
        tg.BackButton.show();
        tg.onEvent('backButtonClicked', () => {
          window.location.href = "../index.html";
        });
      }
    } catch (e) {
      console.log('BackButton not supported');
    }

    // Dummy mosque data
    const mosques = [
      {
        id: 1,
        name: "Seoul Central Mosque",
        nameKo: "ÏÑúÏö∏Ï§ëÏïôÏÑ±Ïõê",
        phone: "+82-2-793-6908",
        address: "39-1 Hannam-dong, Yongsan-gu, Seoul",
        addressKo: "ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ïö©ÏÇ∞Íµ¨ Ïö∞ÏÇ¨Îã®Î°ú 10Í∏∏ 39-1",
        distance: 1.2,
        photo: "../assets/mosque.png",
        lat: 37.5347,
        lng: 126.9996,
        rating: 4.5,
        reviews: "Beautiful mosque with traditional architecture. Very welcoming community.",
        kakaoMapUrl: "https://map.kakao.com/link/map/Seoul-Central-Mosque,37.5347,126.9996",
        naverMapUrl: "https://map.naver.com/v5/entry/place/11862651"
      },
      {
        id: 2,
        name: "Busan Mosque",
        nameKo: "Î∂ÄÏÇ∞ ÏÑ±Ïõê",
        phone: "+82-51-631-2308",
        address: "15 Jungang-daero 691, Busanjin-gu, Busan",
        addressKo: "Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Î∂ÄÏÇ∞ÏßÑÍµ¨ Ï§ëÏïôÎåÄÎ°ú 691Î≤àÍ∏∏ 15",
        distance: 2.5,
        photo: "../assets/mosque.png",
        lat: 35.1543,
        lng: 129.0598,
        rating: 4.3,
        reviews: "Clean and peaceful. Good location near the city center.",
        kakaoMapUrl: "https://map.kakao.com/link/map/Busan-Mosque,35.1543,129.0598",
        naverMapUrl: "https://map.naver.com/v5/entry/place/example2"
      },
      {
        id: 3,
        name: "Ansan Mosque",
        nameKo: "ÏïàÏÇ∞ ÏÑ±Ïõê",
        phone: "+82-31-491-5943",
        address: "123 Wonkok-dong, Danwon-gu, Ansan",
        addressKo: "Í≤ΩÍ∏∞ÎèÑ ÏïàÏÇ∞Ïãú Îã®ÏõêÍµ¨ ÏõêÍ≥°Îèô 123",
        distance: 3.8,
        photo: "../assets/mosque.png",
        lat: 37.3236,
        lng: 126.8216,
        rating: 4.7,
        reviews: "Very active community. Great facilities for families.",
        kakaoMapUrl: "https://map.kakao.com/link/map/Ansan-Mosque,37.3236,126.8216",
        naverMapUrl: "https://map.naver.com/v5/entry/place/example3"
      },
      {
        id: 4,
        name: "Daegu Mosque",
        nameKo: "ÎåÄÍµ¨ ÏÑ±Ïõê",
        phone: "+82-53-743-9875",
        address: "78 Dongseong-ro, Jung-gu, Daegu",
        addressKo: "ÎåÄÍµ¨Í¥ëÏó≠Ïãú Ï§ëÍµ¨ ÎèôÏÑ±Î°ú 78",
        distance: 5.1,
        photo: "../assets/mosque.png",
        lat: 35.8686,
        lng: 128.5936,
        rating: 4.2,
        reviews: "Nice mosque with friendly imam. Friday prayers are well organized.",
        kakaoMapUrl: "https://map.kakao.com/link/map/Daegu-Mosque,35.8686,128.5936",
        naverMapUrl: "https://map.naver.com/v5/entry/place/example4"
      },
      {
        id: 5,
        name: "Gwangju Mosque",
        nameKo: "Í¥ëÏ£º ÏÑ±Ïõê",
        phone: "+82-62-222-1234",
        address: "456 Geumnam-ro, Dong-gu, Gwangju",
        addressKo: "Í¥ëÏ£ºÍ¥ëÏó≠Ïãú ÎèôÍµ¨ Í∏àÎÇ®Î°ú 456",
        distance: 6.3,
        photo: "../assets/mosque.png",
        lat: 35.1468,
        lng: 126.9213,
        rating: 4.4,
        reviews: "Small but comfortable mosque. Good for daily prayers.",
        kakaoMapUrl: "https://map.kakao.com/link/map/Gwangju-Mosque,35.1468,126.9213",
        naverMapUrl: "https://map.naver.com/v5/entry/place/example5"
      }
    ];

    // Render mosque cards
    function renderMosqueCards() {
      const container = document.getElementById('mosqueCards');
      
      mosques.forEach(mosque => {
        const card = document.createElement('div');
        card.className = 'mosque-card';
        card.onclick = () => {
          // Navigate to detail page with mosque ID
          window.location.href = `mosque-detail.html?id=${mosque.id}`;
        };
        
        card.innerHTML = `
          <div class="mosque-card-image">
            <img src="${mosque.photo}" alt="${mosque.name}" />
            <div class="mosque-distance-badge">${mosque.distance} km</div>
          </div>
          <div class="mosque-card-content">
            <h3 class="mosque-name">${mosque.name}</h3>
            <p class="mosque-name-ko">${mosque.nameKo}</p>
            <div class="mosque-info">
              <div class="mosque-info-item">
                <span class="info-icon">üìû</span>
                <span class="info-text">${mosque.phone}</span>
              </div>
              <div class="mosque-info-item">
                <span class="info-icon">üìç</span>
                <span class="info-text">${mosque.addressKo}</span>
              </div>
            </div>
          </div>
        `;
        
        container.appendChild(card);
      });
    }

    // Render cards when page loads
    document.addEventListener('DOMContentLoaded', renderMosqueCards);
  </script>

</body>
</html>